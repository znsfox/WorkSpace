## 概念:

### **Docker镜像:**

Docker镜像就是一个只读的模板.

例如:一个镜像可以包含一个完整的ubuntu操作系统,里面仅仅装了apache或用户需要的其他应用程序.

**镜像可以用来创建容器.**



### Docker容器:

Docker利用容器来运行应用.

**容器是从镜像创建的运行实例.它可以被启动,停止,开启和删除.**

每个容器都是相互隔离的,保证安全的平台.

可以把窗口看作是一个简易版的linux环境(包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。

*注：镜像是只读的，容器在启动的时候创建一层可写层作为最上层。



### 常用命令：

- -t:在新容器内指定一个伪终端或终端
  - -i: 允许你对容器内标准输入<STDIN>进行交互





### Docker数据卷:

数据卷是一个可供一个或多个容器使用的特殊容器,它绕过UFS，可以提供很多有用的特性：

- 数据卷可以在容器之间共享和重用
- 对数据卷的修改可以立马生效
- 对数据卷的更新不会影响镜像
- 数据卷会一起存在，直到没有容器使用

*数据卷的使用类似于linux下对文件或目录进行mount



## 使用:

### Docker 移除镜像

如果要移除本地的镜像，可以使用 `docker rmi` 命令。注意 `docker rm` 命令是移除容器。

*注意：在删除镜像之前要先用 `docker rm` 删掉依赖于这个镜像的所有容器。



### 终止Docker容器

可以使用 `docker stop` 来终止一个运行中的容器。

此外，当Docker容器中指定的应用终结时，容器也自动终止。 例如对于上一章节中只启动了一个终端的容器，用户通过 `exit` 命令或 `Ctrl+d` 来退出终端时，所创建的容器立刻终止。

终止状态的容器可以用 `docker ps -a` 命令看到。



处于终止状态的容器，可以通过 `docker start` 命令来重新启动。

此外，`docker restart` 命令会将一个运行态的容器终止，然后再重新启动它

### 创建一个数据卷

在用 `docker run` 命令的时候，使用 `-v` 标记来创建一个数据卷并挂载到容器里。在一次 run 中多次使用可以挂载多个数据卷。

下面创建一个 web 容器，并加载一个数据卷到容器的 `/webapp` 目录。

```shell
$ sudo docker run -d -P --name web -v /webapp training/webapp python app.py
```





### Docker 数据卷容器

如果你有一些持续更新的数据需要在容器之间共享，最好创建数据卷容器。

数据卷容器，其实就是一个正常的容器，专门用来提供数据卷供其它容器挂载的。





### Docker Compose:

是用来定义和运行复杂应用的小工具，比如在一个文件中定义多个容器，只用一个命令就可以让一切就绪并运行。